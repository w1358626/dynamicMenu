<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
</head>
<div id="box">
<!--<ul class="first">
<li>一级菜单
<div class="triangle"></div>
<ul>
  <li>
    <div>
	   <h4>移动服务</h4>
	   <a>金融智能客服</a>
	   <a>金融智能客服</a>
	   <a>金融智能客服</a>
    </div>
  </li>

</ul>
</li>
<li>一级菜单
<div class="triangle"></div>
<ul>
  <li>二级菜单</li>

</ul>
</li>
<li>一级菜单
<div class="triangle"></div>
<ul>
  <li>二级菜单</li>
 
</ul>
</li>
</ul>-->
<ul class="first"></ul>
<button class="databtn" onclick="todata1()">dataone</button>
<button class="databtn" onclick="todata2()">datatwo</button>
</div>


<script type="text/javascript">
var data1=[

'产品',
'产品/计算/云服务器',
'产品/计算/GPU 云服务器',
'产品/计算/FPGA 云服务器',
'产品/计算/专用宿主机',
'产品/计算/黑石物理服务器',
'产品/计算/云硬盘',
'产品/计算/容器服务',
'产品/计算/容器实例服务NEW',
'产品/计算/弹性伸缩',
'产品/计算/私有网络',
'产品/计算/无服务器云函数',
'产品/计算/批量计算',
'产品/存储',
'产品/存储/对象存储',
'产品/存储/文件存储',
'产品/存储/归档存储',
'产品/存储/存储网关',
'产品/存储/私有云存储',
'产品/存储/云硬盘',
'产品/存储/云数据迁移',
'产品/存储/日志服务',
'产品/视频服务',
'产品/视频服务/点播',
'产品/视频服务/直播',
'产品/视频服务/云转码NEW',
'产品/视频服务/实时音视频NEW',
'产品/视频服务/短视频',
'产品/视频服务/移动直播',
'产品/视频服务/美视优享',
'产品/视频服务/X-P2P',
'产品/视频服务/互动直播',
'产品/管理工具',
'产品/管理工具/腾讯云助手NEW',
'产品/管理工具/云监控',
'产品/管理工具/云拨测',
'产品/管理工具/蓝鲸平台',
'产品/管理工具/访问管理',
'产品/管理工具/云审计',
'产品/管理工具/密钥管理服务 KMS',
'产品/管理工具/云 API',
'产品/管理工具/命令行工具',
'产品/管理工具/迁移服务平台 MSP', 
'产品/云数据库 TencentDB',
'产品/云数据库 TencentDB/关系型数据库',
'产品/云数据库 TencentDB/云数据库 Redis',
'产品/云数据库 TencentDB/云数据库 MongoDB',
'产品/云数据库 TencentDB/数据传输服务 DTS',
'产品/云数据库 TencentDB/分布式数据库',
'产品/云数据库 TencentDB/HTAP 数据库',
'产品/云数据库 TencentDB/数据库一体机 TData',
'产品/云数据库 TencentDB/时序数据库 CTSDB',
'产品/云数据库 TencentDB/云数据库 Hbase',
'产品/网络',
'产品/网络/负载均衡',
'产品/网络/私有网络',
'产品/网络/专线接入',
'产品/网络/弹性网卡',
'产品/网络/NAT 网关',
'产品/网络/对等连接',
'产品/网络/VPN 连接',
'产品/网络/网络流日志',
'产品/网络/Anycast公网加速',
'共享带宽包',
'产品/CDN与加速',
'产品/CDN与加速/静态内容加速',
'产品/CDN与加速/下载分发加速',
'产品/CDN与加速/音视频点播加速',
'产品/CDN与加速/海外加速',
'产品/CDN与加速/动态加速网络',
'产品/CDN与加速/全球应用加速',
'产品/CDN与加速/CDN 边缘计算',
'产品/CDN与加速/安全加速',
'产品/互联网中间件',
'产品/互联网中间件/负载均衡',
'产品/互联网中间件/消息队列 MQ',
'产品/互联网中间件/消息队列 CKafka',
'产品/互联网中间件/API 网关',
'产品/互联网中间件/腾讯分布式服务框架',
'产品/域名与网站',
'产品/域名与网站/域名注册',
'产品/域名与网站/域名转入',
'产品/域名与网站/云解析',
'产品/域名与网站/建站主机',
'产品/域名与网站/网站备案',
'产品/域名与网站/SSL 证书',
'产品/域名与网站/移动解析 HttpDNS',
'产品/域名与网站/企业邮箱',
'产品/域名与网站/检测工具',
'产品/安全',
'产品/安全/BGP高防网络安全',
'产品/安全/网站管家 WAF网络安全',
'产品/安全/云镜（主机安全）',
'产品/安全/Web 漏洞扫描（网络安全）',
'产品/安全/活动防刷（业务安全）',
'产品/安全/登录保护（业务安全）',
'产品/安全/验证码（业务安全）',
'产品/安全/内容安全（业务安全）',
'产品/安全/应用安全（移动安全）',
'产品/安全/手游反作弊（移动安全）',
'产品/安全/专家服务',
'产品/安全/态势感知',
'产品/安全/数据加密服务',
'产品/安全/数据安全审计',
'产品/开发者工具',
'产品/开发者工具/Tencent Hub',
'产品/开发者工具/DevMaster',
'产品/开发者工具/Cloud Studio',
'产品/开发者工具/TAPD 敏捷项目管理',
'产品/开发者工具/TGit 代码托管',
'产品/开发者工具/CCI 持续集成',
'产品/开发者工具/织云 自动化运维',
'产品/企业应用',
'产品/企业应用/腾讯企点',
'产品/企业应用/腾讯乐享NEW',
'产品/企业应用/物联网',
'产品/企业应用/物联网通信',
'产品/企业应用/物联卡',
'产品/人工智能（AI)',
'产品/人工智能（AI)/智能鉴黄',
'产品/人工智能（AI)/图片标签',
'产品/人工智能（AI)/文字识别',
'产品/人工智能（AI)/人脸识别',
'产品/人工智能（AI)/人脸核身',
'产品/人工智能（AI)/人脸支付',
'产品/人工智能（AI)/人脸融合',
'产品/人工智能（AI)/语音识别',
'产品/人工智能（AI)/语音合成',
'产品/人工智能（AI)/声纹识别',
'产品/人工智能（AI)/客服机器人',
'产品/人工智能（AI)/文智自然语言处理',
'产品/人工智能（AI)/机器翻译',
'产品/人工智能（AI)/腾讯智能钛机器学习',
'产品/人工智能（AI)/腾讯云小微',
'产品/人工智能（AI)/知识图谱',
'产品/人工智能（AI)/内容理解',
'产品/人工智能（AI)/金融服务',
'产品/人工智能（AI)/借贷反欺诈',
'产品/人工智能（AI)/金融级身份认证',
'产品/人工智能（AI)/催收机器人',
'产品/人工智能（AI)/金融智能客服',
'产品/人工智能（AI)/智能投顾',
'产品/移动服务',
'产品/移动服务/移动开发平台',
'产品/移动服务/腾讯云应用服务平台NEW',
'产品/移动服务/腾讯移动分析',
'产品/移动服务/腾讯移动推送（信鸽）',
'产品/移动服务/腾讯计费（米大师）',
'产品/移动服务/腾讯客户端性能分析 QAPM',
'产品/移动服务/企鹅竞速',
'产品/移动服务/维纳斯',
'产品/移动服务/测试服务 WeTest',
'产品/通信服务',
'产品/通信服务/云通信',
'产品/通信服务/短信',
'产品/通信服务/PSTN号码保护',
'产品/通信服务/流量服务',
'产品/通信服务/云呼叫中心',
'产品/游戏服务',
'产品/游戏服务/游戏多媒体引擎 GME',
'产品/游戏服务/游戏更新',
'产品/游戏服务/测试服务 WeTest',
'产品/游戏服务/压测大师',
'产品/游戏服务/智营网优',
'产品/游戏服务/游戏存储',
'产品/游戏服务/手游社交组件',
'产品/零售服务',
'产品/零售服务/腾讯优评',
'产品/零售服务/腾讯优Mall',
'产品/零售服务/腾讯优客NEW',
'产品/零售服务/营销风控NEW',
'产品/大数据基础服务',
'产品/大数据基础服务/大数据处理套件',
'产品/大数据基础服务/弹性 MapReduce',
'产品/大数据基础服务/流计算服务',
'产品/大数据基础服务/Elasticsearch Service',
'产品/大数据基础服务/数据工坊',
'产品/大数据基础服务/云推荐引擎',
'产品/大数据基础服务/DI-P实时多维分析引擎',
'产品/大数据可视化服务',
'产品/大数据可视化服务/大数据可视交互系统',
'产品/大数据可视化服务/商业智能分析',
'产品/大数据可视化服务/云图',
'产品/大数据应用服务',
'产品/大数据应用服务/智能推荐',
'产品/大数据应用服务/数字营销',
'产品/大数据应用服务/智能选址NEW',
'产品/大数据应用服务/云搜',
'产品/大数据应用服务/文智公众趋势分析',
'产品/大数据应用服务/微金小云客服',
'产品/量子技术',
'产品/量子技术/量子密钥管理服务',
'产品/量子技术/抗量子签名服务',
'产品/数据处理',
'产品/数据处理/万象优图',
'产品/数据处理/视频处理',
'产品/数据处理/双螺旋',
'产品/区块链',
'产品/区块链/TBaaS',
'支持',
'支持/开发者资源',
'支持/开发者资源/入门中心',
'支持/开发者资源/SDK 中心',
'支持/开发者资源/API 中心',
'支持/开发者资源/开发者运营',
'支持/开发者资源/命令行工具',
'支持/服务',
'支持/服务/基础服务',
'支持/服务/旗舰服务',
'支持/服务/护航服务',
'支持/支持',
'支持/支持/自助服务',
'支持/支持/工单',
'支持/支持/问答',
'支持/支持/联系我们',
'最新活动'
];

var data2=[

'产品',
'产品/计算/云服务器',
'产品/计算/GPU 云服务器',
'产品/计算/FPGA 云服务器',
'产品/计算/专用宿主机',
'产品/计算/黑石物理服务器',
'产品/计算/云硬盘',
'产品/计算/容器服务',
'产品/计算/容器实例服务NEW',
'产品/计算/弹性伸缩',
'产品/计算/私有网络',
'产品/计算/无服务器云函数',
'产品/计算/批量计算',
'产品/存储',
'产品/存储/对象存储',
'产品/存储/文件存储',
'产品/存储/归档存储',
'产品/存储/存储网关',
'产品/存储/私有云存储',
'产品/存储/云硬盘',
'产品/存储/云数据迁移',
'产品/存储/日志服务',
'产品/视频服务',
'产品/视频服务/点播',
'产品/视频服务/直播',
'产品/视频服务/云转码NEW',
'产品/视频服务/实时音视频NEW',
'产品/视频服务/短视频',
'产品/视频服务/移动直播',
'产品/视频服务/美视优享',
'产品/视频服务/X-P2P',
'产品/视频服务/互动直播',
'产品/管理工具',
'产品/管理工具/腾讯云助手NEW',
'产品/管理工具/云监控',
'产品/管理工具/云拨测',
'产品/管理工具/蓝鲸平台',
'产品/管理工具/访问管理',
'产品/管理工具/云审计',
'产品/管理工具/密钥管理服务 KMS',
'产品/管理工具/云 API',
'产品/管理工具/命令行工具',
'产品/管理工具/迁移服务平台 MSP', 
'产品/云数据库 TencentDB',
'产品/云数据库 TencentDB/关系型数据库',
'产品/云数据库 TencentDB/云数据库 Redis',
'产品/云数据库 TencentDB/云数据库 MongoDB',
'产品/云数据库 TencentDB/数据传输服务 DTS',
'产品/云数据库 TencentDB/分布式数据库',
'产品/云数据库 TencentDB/HTAP 数据库',
'产品/云数据库 TencentDB/数据库一体机 TData',
'产品/云数据库 TencentDB/时序数据库 CTSDB',
'产品/云数据库 TencentDB/云数据库 Hbase',
'产品/网络',
'产品/网络/负载均衡',
'产品/网络/私有网络',
'产品/网络/专线接入',
'产品/网络/弹性网卡',
'产品/网络/NAT 网关',
'产品/网络/对等连接',
'产品/网络/VPN 连接',
'产品/网络/网络流日志',
'产品/网络/Anycast公网加速',
'共享带宽包',
'产品/CDN与加速',
'产品/CDN与加速/静态内容加速',
'产品/CDN与加速/下载分发加速',
'产品/CDN与加速/音视频点播加速',
'产品/CDN与加速/海外加速',
'产品/CDN与加速/动态加速网络',
'产品/CDN与加速/全球应用加速',
'产品/CDN与加速/CDN 边缘计算',
'产品/CDN与加速/安全加速',
'产品/互联网中间件',
'产品/互联网中间件/负载均衡',
'产品/互联网中间件/消息队列 MQ',
'产品/互联网中间件/消息队列 CKafka',
'产品/互联网中间件/API 网关',
'产品/互联网中间件/腾讯分布式服务框架',
'产品/域名与网站',
'产品/域名与网站/域名注册',
'产品/域名与网站/域名转入',
'产品/域名与网站/云解析',
'产品/域名与网站/建站主机',
'产品/域名与网站/网站备案',
'产品/域名与网站/SSL 证书',
'产品/域名与网站/移动解析 HttpDNS',
'产品/域名与网站/企业邮箱',
'产品/域名与网站/检测工具',
'产品/安全',
'产品/安全/BGP高防网络安全',
'产品/安全/网站管家 WAF网络安全',
'产品/安全/云镜（主机安全）',
'产品/安全/Web 漏洞扫描（网络安全）',
'产品/安全/活动防刷（业务安全）',
'产品/安全/登录保护（业务安全）',
'产品/安全/验证码（业务安全）',
'产品/安全/内容安全（业务安全）',
'产品/安全/应用安全（移动安全）',
'产品/安全/手游反作弊（移动安全）',
'产品/安全/专家服务',
'产品/安全/态势感知',
'产品/安全/数据加密服务',
'产品/安全/数据安全审计',
'产品/开发者工具',
'产品/开发者工具/Tencent Hub',
'产品/开发者工具/DevMaster',
'产品/开发者工具/Cloud Studio',
'产品/开发者工具/TAPD 敏捷项目管理',
'产品/开发者工具/TGit 代码托管',
'产品/开发者工具/CCI 持续集成',
'产品/开发者工具/织云 自动化运维',
'产品/企业应用',
'产品/企业应用/腾讯企点',
'产品/企业应用/腾讯乐享NEW',
'产品/企业应用/物联网',
'产品/企业应用/物联网通信',
'产品/企业应用/物联卡',
'产品/人工智能（AI)',
'产品/人工智能（AI)/智能鉴黄',
'产品/人工智能（AI)/图片标签',
'产品/人工智能（AI)/文字识别',
'产品/人工智能（AI)/人脸识别',
'产品/人工智能（AI)/人脸核身',
'产品/人工智能（AI)/人脸支付',
'产品/人工智能（AI)/人脸融合',
'产品/人工智能（AI)/语音识别',
'产品/人工智能（AI)/语音合成',
'产品/人工智能（AI)/声纹识别',
'产品/人工智能（AI)/客服机器人',
'产品/人工智能（AI)/文智自然语言处理',
'产品/人工智能（AI)/机器翻译',
'产品/人工智能（AI)/腾讯智能钛机器学习',
'产品/人工智能（AI)/腾讯云小微',
'产品/人工智能（AI)/知识图谱',
'产品/人工智能（AI)/内容理解',
'产品/人工智能（AI)/金融服务',
'产品/人工智能（AI)/借贷反欺诈',
'产品/人工智能（AI)/金融级身份认证',
'产品/人工智能（AI)/催收机器人',
'产品/人工智能（AI)/金融智能客服',
'产品/人工智能（AI)/智能投顾',
'产品/移动服务',
'产品/移动服务/移动开发平台',
'产品/移动服务/腾讯云应用服务平台NEW',
'产品/移动服务/腾讯移动分析',
'产品/移动服务/腾讯移动推送（信鸽）',
'产品/移动服务/腾讯计费（米大师）',
'产品/移动服务/腾讯客户端性能分析 QAPM',
'产品/移动服务/企鹅竞速',
'产品/移动服务/维纳斯',
'产品/移动服务/测试服务 WeTest',
'产品/通信服务',
'产品/通信服务/云通信',
'产品/通信服务/短信',
'产品/通信服务/PSTN号码保护',
'产品/通信服务/流量服务',
'产品/通信服务/云呼叫中心',
'产品/游戏服务',
'产品/游戏服务/游戏多媒体引擎 GME',
'产品/游戏服务/游戏更新',
'产品/游戏服务/测试服务 WeTest',
'产品/游戏服务/压测大师',
'产品/游戏服务/智营网优',
'产品/游戏服务/游戏存储',
'产品/游戏服务/手游社交组件',
'产品/零售服务',
'产品/零售服务/腾讯优评',
'产品/零售服务/腾讯优Mall',
'产品/零售服务/腾讯优客NEW',
'产品/零售服务/营销风控NEW',
'产品/大数据基础服务',
'产品/大数据基础服务/大数据处理套件',
'产品/大数据基础服务/弹性 MapReduce',
'产品/大数据基础服务/流计算服务',
'产品/大数据基础服务/Elasticsearch Service',
'产品/大数据基础服务/数据工坊',
'产品/大数据基础服务/云推荐引擎',
'产品/大数据基础服务/DI-P实时多维分析引擎',
'产品/大数据可视化服务',
'产品/大数据可视化服务/大数据可视交互系统',
'产品/大数据可视化服务/商业智能分析',
'产品/大数据可视化服务/云图',
'产品/大数据应用服务',
'产品/大数据应用服务/智能推荐',
'产品/大数据应用服务/数字营销',
'产品/大数据应用服务/智能选址NEW',
'产品/大数据应用服务/云搜',
'产品/大数据应用服务/文智公众趋势分析',
'产品/大数据应用服务/微金小云客服',
'产品/量子技术',
'产品/量子技术/量子密钥管理服务',
'产品/量子技术/抗量子签名服务',
'产品/数据处理',
'产品/数据处理/万象优图',
'产品/数据处理/视频处理',
'产品/数据处理/双螺旋',
'产品/区块链',
'产品/区块链/TBaaS',
'支持',
'支持/开发者资源',
'支持/开发者资源/入门中心',
'支持/开发者资源/SDK 中心',
'支持/开发者资源/API 中心',
'支持/开发者资源/开发者运营',
'支持/开发者资源/命令行工具',
'支持/服务',
'支持/服务/基础服务',
'支持/服务/旗舰服务',
'支持/服务/护航服务',
'支持/支持',
'支持/支持/自助服务',
'支持/支持/工单',
'支持/支持/问答',
'支持/支持/联系我们',
'最新活动',
'云+社区',
'云+社区/云+社区/专栏文章',
'云+社区/云+社区/互动问答',
'云+社区/云+社区/技术沙龙',
'云+社区/云+社区/云学院',
'云+社区/云+社区/开发者手册',
'云+社区/云+社区/开发者实验室',

'云1社区',
'云1社区/云1社区/专栏文章',
'云1社区/云1社区/互动问答',
'云1社区/云1社区/技术沙龙',
'云1社区/云1社区/云学院',
'云1社区/云1社区/开发者手册',
'云1社区/云1社区/开发者实验室',

'云2社区',
'云2社区/云2社区/专栏文章',
'云2社区/云2社区/互动问答',
'云2社区/云2社区/技术沙龙',
'云2社区/云2社区/云学院',
'云2社区/云2社区/开发者手册',
'云2社区/云2社区/开发者实验室'
];
var todata1=function(){
   menuFactory(data1);
};
var todata2=function(){
   menuFactory(data2);
};

var menubox=document.getElementsByClassName('first');
var menuFactory=function(data){
if(menubox[0].hasChildNodes){
for(var r=menubox[0].childNodes.length-1;r>=0;r--){
menubox[0].removeChild(menubox[0].childNodes[r]);
}
}
var tree = {},menu;
//拼接节点的结构
data.forEach(function(item){
	var pathArr = item.split('/');
	var currentPath = tree;
	pathArr.forEach(function(path){
		if(!currentPath.hasOwnProperty(path)){
			currentPath[path] = {};
		}
		currentPath = currentPath[path];
	});
});
console.log(tree);//当前节点的结构

//根据当前数据结构生成结果集(递归获取的树结构)
function getChildren(model){
	var childList = [];
	for(var key in model){
		if(model[key] && JSON.stringify(model[key])!= '{}'){
			childList.push({
				name: key,	
				children:getChildren(model[key])
			});
		}else{
			childList.push({
				name: key
			});
		}
	}
	return childList;
}

//调用递归函数获取结构
menu=getChildren(tree);
console.log(menu);
var itemSpacing='items5',rows=1;
var tooLong=false,longLong=false;

for(var i=0;i<menu.length;i++){
    var menuone;
    var menutwo=document.createElement('div');
	var count=0;
	console.log(menu[i].children)
	if(menu[i].children){
	if(menu[i].children.length>3){
	     rows=2;
	  }
	 }
	 if(menu[i].children){
	  if(menu[i].children.length>10){
	      longLong=true;
	    }
	   }

 if(menu[i].children){
	 for(var l=0;l<menu[i].children.length;l++){
        
	   if(menu[i].children[l].children.length>20){
		  tooLong=true;
	     }
		}
	  }
var menutwoCol=document.createElement('div');
menutwoCol.classList.add('inline_div');
 if(menu[i].children){  
      var j=0;
	for( j=0;j<menu[i].children.length;j++){
	   var currentLong=false;   
	    var container=document.createElement('div');
	   if(menu[i].children[j].children.length>20){
		  currentLong=true;
	   }
	    
	   if(rows==1&&longLong==false&&tooLong==false){
	     console.log('rows1')
	       var title=document.createElement('h4');	   
		   menutwoCol.classList.add('menutwo_item');
		   title.innerHTML=menu[i].children[j].name+'';
	       menutwoCol.appendChild(title);
		   for(var k=0;k<menu[i].children[j].children.length;k++){
		      var currentA=document.createElement('a');
		      currentA.innerHTML=menu[i].children[j].children[k].name+'';
			  menutwoCol.appendChild(currentA);
		   }
		   console.log(menutwoCol)
		   menutwo.appendChild(menutwoCol);
		   menutwoCol=document.createElement('div');
           menutwoCol.classList.add('inline_div');

	     }
		 
		  if(rows==2&&longLong==false&&tooLong==false){
		   console.log('row2')
	       var title=document.createElement('h4');	   
		   container.classList.add('menutwo_item');
		   title.innerHTML=menu[i].children[j].name+'';
	       container.appendChild(title);
		   for(var m=0;m<menu[i].children[j].children.length;m++){
		      var currentA=document.createElement('a');
		      currentA.innerHTML=menu[i].children[j].children[m].name+'';
			  container.appendChild(currentA);
		   }
		   if(menutwoCol.chidren){
		     console.log('haschildren')
		   if(menutwoCol.chidren.length>=1){
		     menutwoCol.appendChild(container);
			 menutwo.appendChild(menutwoCol);
			  console.log(menutwoCol)
			 menutwoCol=document.createElement('div');
             menutwoCol.classList.add('inline_div');
			 }
		   }else{
		     menutwoCol.appendChild(container);
			  console.log(menutwoCol)
		   }
		  

	      }
		  
		  if(longLong==true&&tooLong==true){
		    console.log('longLong');
		    count=count+menu[i].children[j].children.length+2;	      
	       var title=document.createElement('h4');	   
		   container.classList.add('menutwo_item');
		   title.innerHTML=menu[i].children[j].name+'';
	       container.appendChild(title);
		   for(var n=0;n<menu[i].children[j].children.length;n++){
		      var currentA=document.createElement('a');
		      currentA.innerHTML=menu[i].children[j].children[n].name+'';
			  container.appendChild(currentA);
		   }
		   if(count>47){	 
			 menutwo.appendChild(menutwoCol);
			 console.log(menutwoCol);
			 menutwoCol=document.createElement('div');
             menutwoCol.classList.add('inline_div');
			 menutwoCol.appendChild(container);
			 count=menu[i].children[j].children.length;
		   }else{   
		     menutwoCol.appendChild(container);
			 if(j==menu[i].children.length-1){
			 console.log(j)
			    menutwo.appendChild(menutwoCol);
			 }
			  console.log(menutwoCol)
		   }

	      }
		  
	       if(longLong==false&&tooLong==true){
		   console.log('tooLong')
		    count+=menu[i].children[j].children.length+2;
	       var title=document.createElement('h4');	   
		   container.classList.add('menutwo_item');
		   title.innerHTML=menu[i].children[j].name+'';
	       container.appendChild(title); 
		   for(var r=0;r<menu[i].children[j].children.length;r++){
		      var currentA=document.createElement('a');
		      currentA=menu[i].children[j].children[r].name+'';
			  container.appendChild(currentA);
		   }
		   if(currentLong){
		     menutwoCol.appendChild(container);
			 menutwo.appendChild(menutwoCol);
			 console.log(menutwoCol)
			 menutwoCol=document.createElement('div');
             menutwoCol.classList.add('inline_div');
			 currentLong=false;

		   }
		   if(count>23){
		     menutwoCol.appendChild(container);
			 menutwo.appendChild(menutwoCol);
			 console.log(menutwoCol)
			 menutwoCol=document.createElement('div');
             menutwoCol.classList.add('inline_div');
			 count=0;
		   }else{
		     menutwoCol.appendChild(container);
			 console.log(menutwoCol)
		   }

	      }
	   
	   
	}
var toleft='left100';
 if(menu[i].children){
 console.log('switch col')
	switch(menu[i].children.length){
	     case  1: { menutwo.classList.add('colum1');toleft='left100';};break;
	     case  2:  { menutwo.classList.add('colum2');toleft='left200';};break;
		 case  3:   { menutwo.classList.add('colum3');toleft='left300';};break;
		 case  4:   { menutwo.classList.add('colum2');toleft='left200';};break;
		 case  5:   { menutwo.classList.add('colum3');toleft='left300';};break;
		 case  6:   { menutwo.classList.add('colum4');toleft='left300';};break;
		 case  7:   { menutwo.classList.add('colum4');toleft='left300';};break;
		 case  8:   { menutwo.classList.add('colum4');toleft='left300';};break;
		 case  9:   { menutwo.classList.add('colum5');toleft='left300';};break;
		 case  10:   { menutwo.classList.add('colum5');toleft='left300';};break;
	     }
	   }
	  
	   if(menu[i].children){
	   if(menu[i].children.length>10) {
	         toleft='left300';
	         menutwo.classList.add('colum5');
		    }
		  }
	if(menu.length>5) itemSpacing='items10'; 
	if(menu.length>10) itemSpacing='items20';
	if(menu[i].children){
     menuone=menu[i].name+'<div class="triangle"></div><ul class="'+toleft+'"><li>'+menutwo.outerHTML+'</li></ul>';
     if(longLong||tooLong){
	     var gundong='<div id="scrollView"><div id="scrollContent">'+menutwo.outerHTML+'</div><div id="scrollTrack"><div id="btnUp"></div><div id="trackUp"></div><div id="scrollBar"></div><div id="trackDown"></div><div id="btnDown"></div></div></div>';
	     menuone=menu[i].name+'<div class="triangle"></div><ul class="'+toleft+'"><li>'+gundong+'</li></ul>';    
	 }
	}
	longLong=false;
	tooLong=false;
	rows=1;
	}else{
	   menuone=menu[i].name+'';
	   
	   }
	var menuLi=document.createElement('li');
	menuLi.classList.add(itemSpacing+'');
	menuLi.innerHTML=menuone;
	menubox[0].appendChild(menuLi);
	
	}

var uls = document.querySelectorAll("ul"); //获取所有的ul
var lis = document.querySelectorAll("li"); //获取所有的li
for (var i = uls.length - 1; i >= 0; i--) {
    if(uls[i].parentNode.nodeName === "LI") {
        uls[i].parentNode.classList.add("relative"); //相对定位
        uls[i].classList.add("absolute");  // 绝对定位
		uls[i].style.transition='height 200ms';
        uls[i].style.overflow='hidden';
	    uls[i].style.height='0';
         
    }
}

for (let i = 0; i < lis.length; i++) { // 控制每一个li

    lis[i].onmouseover = function() {
        if( lis[i].children.length === 2) {
		    var tleft=this.offsetWidth/2-6;
			this.children[0].style.left=tleft+'px';
		    this.children[0].style.visibility='visible';
            this.children[1].classList.remove("hide");
            this.children[1].classList.add("show");
			this.children[1].style.height='600px';
        } 
    }
    lis[i].onmouseout = function() {

        if( lis[i].children.length === 2) {
            this.children[0].style.visibility='hidden';		
			this.children[1].style.height='0';
        }
    }
}



var scrollContent = document.getElementById("scrollContent");
    var scrollBar = document.getElementById("scrollBar");
//给滚动内容区域填充大量元素


//指示鼠标左键是否处于按下状态的变量，在滑块上按下鼠标左键时设为true，在页面上任意位置松开时设回false
//由于鼠标拖动滑块时可能会离开滑块，所以mouseup和mousemove事件是注册在window上的
//在mousemove事件处理程序中，会检查该变量，以确定当前是否在拖动滑块
var mouseHeld = false;
//记录上一次mousemove事件发生时，鼠标的Y轴位置，每次发生mousemove事件时，跟上一次作比较，确定需要滚动多少距离
var previousClientY = 0;
var scrollBarHeight=Math.floor(550/(scrollContent.scrollHeight/550));
//滑块可滑动的距离，计算方式为整个滚动条高度度减去上下按钮的高度，再减去滑块本身的高度
var barMoveLength = 550 - scrollBarHeight;
//内容区域可滚动的距离，计算方式为内容区域的总高度减去内容区域本身的高度
var contentMoveLength = scrollContent.scrollHeight -550;
scrollBar.style.height=scrollBarHeight+'px'
//为上下按钮注册事件处理程序
document.getElementById("btnUp").addEventListener("click", function () {
    scrollToRelative(-30);
});
document.getElementById("btnDown").addEventListener("click", function () {
    scrollToRelative(30);
});

//为大幅度上下滚动点击区域注册事件处理程序
//保存trackUp元素变量，因为每次滚动时，都要改变它的高度，以达到移动滑块的效果
var trackUp = document.getElementById("trackUp");
trackUp.addEventListener("click", function () {
    scrollToRelative(-550);
});
document.getElementById("trackDown").addEventListener("click", function () {
    scrollToRelative(550);
});

//为滑块注册鼠标按下事件处理程序，因为只有在滑块上按下鼠标左键时，才算开始拖动滑块
document.getElementById("scrollBar").addEventListener("mousedown", function (e) {
    mouseHeld = true;
    previousClientY = e.clientY;
    //防止页面因为鼠标的拖动而选择上了文本或其他元素
    document.body.classList.add("unselectable");
});

//鼠标左键松开时可能不在滑块上，所以mouseup事件注册在document上
document.addEventListener("mouseup", function (e) {
    mouseHeld = false;
    //让页面恢复可选择
    document.body.classList.remove("unselectable");
});

//鼠标拖动时可能离开滑块，所以mousemove事件也注册在document上
document.addEventListener("mousemove", function (e) {
    if (mouseHeld) {
        //相对滑动距离计算依据为滑块滑动距离占总可滑动距离的比应与内容滚动距离占总可滚动距离的比相等
        scrollToRelative((e.clientY - previousClientY) * contentMoveLength / barMoveLength);
        previousClientY = e.clientY;
    }
});

//为内容区域注册鼠标滚轮事件处理程序
//火狐浏览器使用和其他浏览器不同的滚轮事件和事件参数属性
if (navigator.userAgent.indexOf("Firefox") < 0) {
    scrollContent.addEventListener("mousewheel", function (e) {
        handleMouseWheel(-e.wheelDelta, e);
    });
} else {
    scrollContent.addEventListener("DOMMouseScroll", function (e) {
        handleMouseWheel(e.detail * 30, e);
    });
}

//确定内容区域当前是否在顶部或底部
function isOnTopOrBottom() {
    //判断是否在底部时，用了向上取整函数，因为在chrome下，滚动到底时，scrollTop常为小数，与contentMoveLength不等，向上取整之后一般相等
    return scrollContent.scrollTop == 0 || Math.ceil(scrollContent.scrollTop) == contentMoveLength;
}

//鼠标滚轮事件的处理程序，relative为相对滚动距离，e为事件参数
function handleMouseWheel(relative, e) {
    //记录下滚动之前内容区域是否在两端
    var previousOnTopOrBottom = isOnTopOrBottom();
    scrollToRelative(relative);
    //如果现在不在两端，或者现在在两端而滚动之前不在，则屏蔽默认滚轮行为————滚动整个页面
    //反过来说，只有当“滚动”（实际上内容区域未滚动）前后内容区域都在某一端时，即已经到两端之后继续滚动时，才让滚动整个页面
    if (!isOnTopOrBottom() || (isOnTopOrBottom() && !previousOnTopOrBottom)) {
        e.preventDefault();
    }
}

//将内容区域滚动到某一绝对位置
function scrollTo(top) {
    if (top < 0) {
        scrollContent.scrollTop = 0;
    } else if (top > contentMoveLength) {
        scrollContent.scrollTop = contentMoveLength;
    } else {
        scrollContent.scrollTop = top;
    }

    //设置滑块的位置，这是通过设置滑块上面的大幅度向上滚动点击区域的高度实现的
    //滑块位置计算依据为滑块距顶部距离占总可滑动距离的比应与内容区域距顶部距离占总可滚动距离的比相等
    var barDownDistance = scrollContent.scrollTop * barMoveLength / contentMoveLength;
    trackUp.style.height = barDownDistance + "px";
}

//将内容区域滚动某一相对距离
function scrollToRelative(relative) {
    scrollTo(scrollContent.scrollTop + relative);
}

}
menuFactory(data1);
</script>
<style rel="stylesheet" type="text/css">
*{margin:0;padding:0;}

        ul {
            list-style: none;
            float: left;
        }
.first>li:hover {
            color: blue;
            transition: color .2s;
        }
        ul {
		    list-style-type:none;
            visibility: hidden;
			color:#444444;
			z-index:100;
        }
        ul.first {
		    padding-left:300px;
            visibility: visible;
			height:60px;
			width:100%;
			background:#444455;
			color:#fff;
        }
		 ul.first>li{
		    height:55px;
			line-height: 60px;
            position: relative;
            display:inline-block;
			font-size:15px;
        }
		.relative {
            position:relative;
            top: 0;
            left: 0;
        }
        .absolute {
            position: absolute;
            left:0;
            top: 60px;
        }
        .show {
            visibility: visible;
        }
        .hide {
            visibility: hidden;
        }
		.inline_div{display:inline-block;vertical-align:top;}
		.items5{margin-left:40px;}
		.items10{margin-left:30px;}
		.items20{margin-left:25px;}
		.left100{position:absolute;left:-100px;}
		.left200{position:absolute;left:-200px;}
		.left300{position:absolute;left:-300px;}
		.colum1{width:220px;padding:15px;border:1px solid #eeeeee;border-radius:3px;}
		.colum2{width:420px;padding:15px;border:1px solid #eeeeee;border-radius:3px;}
		.colum3{width:630px;padding:15px;border:1px solid #eeeeee;border-radius:3px;}
		.colum4{width:850px;padding:15px;border:1px solid #eeeeee;border-radius:3px;}
		.colum5{width:1050px;padding:15px;}
		.menutwo_item{width:180px;margin:15px;}
		.menutwo_item h4{width:180px;border-bottom:1px solid #eee;height:40px;padding-bottom:5px;}
		.menutwo_item a{font-size:14px;color:#444444;display:block;height:35px;}
        .triangle{width:0;height:0;border-bottom:8px solid #fff;position:absolute;z-index:101;display:block;visibility:hidden;top:54px;border-left:8px solid transparent;border-right:8px solid transparent;}

		
#scrollView {
	width:auto;
    height: 550px;
    /*上下边距是为了演示当滚动到顶部或底部时，继续滚动鼠标滚轮会滚动整个页面*/
    display: flex;
	border:1px solid #eeeeee;border-radius:3px;
}

#scrollContent {
    width:auto;
    height: 550px;
    padding-left: 8px;
    /*隐藏超出滚动内容区域的元素*/
    overflow: hidden;
}

#scrollTrack {
    width: 5px;
    height: 550px;
    background-color: #fff;
    display: flex;
    /*竖着排列滚动条区域内的上下按钮、滑块等元素*/
    flex-direction: column;
}

#btnUp, #btnDown {
    height: 0;
    background-color: brown;
}

#scrollBar {
    height: 50px;
    background-color: #ccc;
}

#trackDown {
    /*让大幅度向下滚动点击区域占据排列完其他元素后剩下的所有区域*/
    flex-grow: 1;
}

/*当拖动滑块时，给body元素加上该类，防止鼠标的拖动导致网页内容的选择操作*/
.unselectable {
    /*当前版本的火狐（53）和Edge（15）不支持user-select标准属性，需要使用浏览器厂商前缀*/
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.databtn{background:#fff;border:1px solid green;color:orange;width:80px;height:50px;border-radius:3px;margin-top:50px;margin-left:20px;}
</style>
</html>